/*
 * Sim900a.h
 *
 *  Created on: 2015年8月6日
 *      Author: i
 */
#ifndef Sim900a_H_
#define Sim900a_H_
#include <Arduino.h>
#include <SoftwareSerial.h>
#define SIM900A_PIN 5
class Sim900a {
public:
	Sim900a(SoftwareSerial* mySerial) {
		this->mySerial = mySerial;
	}
	void prepare();
	char* transform();
	~Sim900a() {

	}
private:
	inline void runCommand(char* ATcommand);
	inline void sendATcommandTimeout(char* ATcommand, char* okFlag,
			unsigned int timeout, boolean retry);
	inline char* readFromMySerial();
	inline char* readFromMySerial(int timeout, char* okFlag);
	inline void close_connect();
	inline void reconnect();
	long previous;
	SoftwareSerial* mySerial;
};
#endif
