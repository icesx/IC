/*
 * IdCardTransformer.cpp
 *
 *  Created on: 2015年8月12日
 *      Author: i
 */

#include <Arduino.h>
#include "../IDReader/IDReader.h"
#include <gprs/Sim900a.h>
#include <sdcard/SdCard.h>
IDReader idReader(&Serial1, 115200);
Sim900aParam param= { 80, "42.94.142.145", "/", &Serial2 };
Sim900a sim900a(&param);
SdCard sdcard;
void setup() {
	Serial.begin(115200);
	delay(1000);
	Serial.println("serial begin at 115200");
	delay(1000);
	Serial2.begin(9600);
	Serial.println("setup ok!");
	sim900a.prepare();
	sdcard.play();
}
void loop() {
	Serial.println("loop start!");
	byte* code = idReader.heartbit();
	if (code != NULL) {
		sim900a.transform();
	}
	delay(500);
}

